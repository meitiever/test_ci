version: 2
jobs:
  build:
    docker:
      - image: ros:kinetic-robot-xenial
    steps:
      - checkout
#      - run: apt-get update && apt-get install -y ros-kinetic-desktop-full
#      - run: source /opt/ros/kinetic/setup.bash && catkin_make
      - run: echo "hello world" # run the `echo` command

#    branches:
#        ignore:
#          - master

  publish-github-release:
    docker:
      - image: cibuilds/github:0.10
    steps:
      - checkout   
      - run: echo ${CIRCLE_SHA1}
      - run:
#          name: "Publish Release on GitHub"
#          command: |
#             VERSION=$(src v0.0.0)
             ls -l && ghr -t de1923fe1aefd9b69565812c8656de9d91383897 -u ${CIRCLE_PROJECT_USERNAME} -r ${CIRCLE_PROJECT_REPONAME} -c ${CIRCLE_SHA1} -delete v0.1.0 test_ci/

workflows:
  version: 2
  main:
    jobs:
#      - build
#          filters:
#           tags:
#              only: /^\d+\.\d+\.\d+$/
      - publish-github-release
#          requires:
#            - build
#          filters:
#            branches:
#              ignore: /.*/
#            tags:
#              only: /^\d+\.\d+\.\d+$/
